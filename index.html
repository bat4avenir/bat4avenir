<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accès au document</title>
  <style>
    :root { --primary:#1a73e8; --text:#111; --muted:#666; }
    body { font-family: Arial, sans-serif; margin: 0; padding: 48px 18px; color: var(--text); background:#fafafa; }
    .card { max-width: 560px; margin: 0 auto; background: #fff; border-radius: 12px; padding: 28px; box-shadow: 0 8px 28px rgba(0,0,0,.08); }
    h1 { margin: 0 0 10px; font-size: 22px; }
    p { margin: 8px 0; color: var(--muted); line-height: 1.45; }
    .btn { display: inline-block; margin-top: 16px; padding: 12px 18px; background: var(--primary);
           color: #fff; border-radius: 10px; text-decoration: none; font-size: 16px; }
    .hint { font-size: 13px; margin-top: 16px; }
    code { background:#f1f3f4; padding:2px 6px; border-radius:6px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Accès au document PDF</h1>
    <div id="message"></div>
    <p class="hint">Astuce : l’URL attend un paramètre <code>?code=XXXX</code>.</p>
  </div>

<script>
  // TODO: Remplace cette URL par l’URL publique finale de ton PDF
  const PDF_URL = "https://bat4avenir.github.io/bat4avenir/comparatif syndic 022026.pdf";

  // Liste des codes autorisés (30 codes)
  const validCodes = ["HBRPOIG8", "F1CBFNO6", "B9M80O2R", "AK1VRJNV", "GFYGWWQC", "38HYF9SX", "MECOSFOG", "YR3XKXWN", "REK8PK3Y", "R9OUDOCU", "ZRENUN5Z", "3JQIP98Q", "1ZXOI65F", "DHJK1EYY", "37Q9AH8R", "VHS1K3AQ", "6L6GT6MJ", "XK87AU5B", "HXTPDPFF", "5E8II49K", "Q71N8MTZ", "X272HPOE", "VB9OOAED", "OECVE6PR", "5N8I4P40", "MGG1W103", "DGDZVGPM", "M82I1LR3", "PE29GD8A", "FPK054NZ"];

  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get("code");

  const messageDiv = document.getElementById("message");

  function esc(s) {
    return String(s).replace(/[&<>'"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',''':'&#39;'}[c]));
  }

  if (!code) {
    messageDiv.innerHTML = "<p><strong>Aucun code fourni.</strong> Scanne le QR code ou ajoute <code>?code=...</code> à l’URL.</p>";
  } else if (validCodes.includes(code)) {
    messageDiv.innerHTML = `
      <p><strong>Code valide :</strong> <code>${esc(code)}</code></p>
      <a class="btn" href="${PDF_URL}" target="_blank" rel="noopener">Télécharger / ouvrir le PDF</a>
      <p class="hint">Si le bouton ne fonctionne pas, vérifie que l’URL du PDF est correcte.</p>
    `;
  } else {
    messageDiv.innerHTML = `
      <p><strong>Code invalide.</strong></p>
      <p>Vérifie que tu as scanné le bon QR code.</p>
    `;
  }
</script>
</body>
</html>
